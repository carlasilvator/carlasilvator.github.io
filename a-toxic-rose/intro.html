<!DOCTYPE html>      
<html lang="ar" dir="rtl">      
<head>      
  <meta charset="UTF-8" />      
  <meta name="viewport" content="width=device-width, initial-scale=1" />      
  <title>ÿ®ÿßÿ±ÿ™ - Toxic Rose</title>      
  <link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">      
  <style>      
    :root {      
      --space-bg-dark: radial-gradient(ellipse at bottom, #020611, #05030c, #000);      
      --star-color: rgba(0, 191, 255, 0.08);      
      --text-primary: #cfefff;      
      --text-secondary: #7dd3fc;      
      --text-accent: #38bdf8;      
      --link-color: #60a5fa;      
      --link-hover-color: #93c5fd;      
      --button-bg: #0f172a;      
      --button-hover-bg: #1e293b;      
      --glow-color: #3b82f6;      
    }      
      
    html { scroll-behavior: smooth; }      
    body {      
      margin: 0;      
      font-family: 'Amiri', serif;      
      background: radial-gradient(ellipse at bottom, #020611 0%, #05030c 35%, #000000 100%);      
      background-size: 400% 400%;      
      animation: spaceWave 60s ease infinite;      
      color: var(--text-primary);      
      overflow-x: hidden;      
      min-height: 100vh;      
      position: relative;      
    }      
      
    body::before {      
      content: "";      
      position: fixed;      
      top: 0; left: 0; right: 0; bottom: 0;      
      pointer-events: none;      
      z-index: 0;      
      background-image:      
        radial-gradient(circle at 20% 30%, rgba(255, 180, 255, 0.3) 2px, transparent 3px),      
        radial-gradient(circle at 50% 60%, rgba(255, 200, 255, 0.2) 1.5px, transparent 2px),      
        radial-gradient(circle at 80% 40%, rgba(255, 160, 255, 0.25) 2.5px, transparent 3px),      
        radial-gradient(circle at 70% 80%, rgba(255, 220, 255, 0.18) 1.8px, transparent 2px);      
      background-size: 250px 250px;      
      animation: starsGlitter 120s linear infinite;      
    }      
      
    @keyframes spaceWave {      
      0% { background-position: 0% 50%; }      
      50% { background-position: 100% 50%; }      
      100% { background-position: 0% 50%; }      
    }      
      
    @keyframes starsGlitter {      
      0% { background-position: 0 0, 0 0, 0 0, 0 0; }      
      100% { background-position: -2000px 2000px, 1500px -1000px, -1600px 1600px, 1200px -900px; }      
    }      
      
    header {      
      width: 100%;      
      background: rgba(2, 6, 23, 0.9);      
      border-bottom: 2px solid var(--glow-color);      
      box-shadow: 0 0 15px var(--glow-color);      
      backdrop-filter: blur(6px);      
      text-align: center;      
      position: relative;      
      z-index: 10000;      
      padding: 0;      
    }      
      
    .logo-wrapper img {      
      width: 100%;      
      height: auto;      
      display: block;      
      object-fit: cover;      
      max-height: 240px;      
    }      
      
    .main-nav {      
      display: flex;      
      overflow-x: auto;      
      white-space: nowrap;      
      padding: 8px 10px;      
      background: rgba(2, 6, 23, 0.9);      
      border-top: 1px solid var(--glow-color);      
      border-bottom: 2px solid var(--glow-color);      
      box-shadow: 0 0 10px var(--glow-color);      
    }      
      
    .main-nav a {      
      display: inline-block;      
      color: var(--link-color);      
      padding: 8px 14px;      
      text-decoration: none;      
      font-weight: bold;      
      font-size: 15px;      
      margin-right: 10px;      
      white-space: nowrap;      
      transition: color 0.3s, text-shadow 0.3s;      
      flex-shrink: 0;      
    }      
      
    .main-nav a:hover {      
      color: var(--link-hover-color);      
      text-shadow: 0 0 5px var(--link-hover-color), 0 0 15px var(--link-hover-color);      
      text-decoration: underline;      
    }      
      
    .container {      
      max-width: 760px;      
      margin: 40px auto;      
      background: rgba(2, 6, 23, 0.6);      
      border-radius: 15px;      
      padding: 28px 22px 80px;      
      box-shadow: 0 0 25px var(--glow-color);      
      position: relative;      
      z-index: 10;  
      overflow: visible;  
    }      
      
    .story-title {      
      text-align: center;      
      font-size: 1.8rem;      
      color: var(--text-secondary);      
      margin-bottom: 30px;      
      text-shadow: 0 0 12px var(--text-secondary);      
    }      
    
    /* ÿ™ÿπŸÑŸäŸÇÿßÿ™ */    
    .comment-box {    
      background: rgba(15, 23, 42, 0.9);    
      border: 1.5px solid #38bdf8;    
      border-radius: 12px;    
      padding: 12px 14px 10px;    
      margin-top: 8px;    
      box-shadow: 0 0 10px #38bdf8aa;    
      font-family: 'Amiri', serif;    
    }    
    .comments {    
      max-height: 150px;    
      overflow-y: auto;    
      margin-bottom: 12px;    
      border-bottom: 1px solid #334155;    
      padding-bottom: 8px;    
      color: #a0cfff;    
    }    
    .comments div {    
      margin-bottom: 10px;    
      word-break: break-word;    
    }    
    .comments b {    
      color: #7dd3fc;    
    }    
    textarea {    
      width: 100%;    
      font-family: 'Amiri', serif;    
      font-size: 1rem;    
      border-radius: 8px;    
      border: 1px solid #38bdf8;    
      background: #020611;    
      color: #cfefff;    
      padding: 8px 10px;    
      resize: vertical;    
      min-height: 60px;    
      transition: border-color 0.3s;    
    }    
    textarea:focus {    
      outline: none;    
      border-color: #7dd3fc;    
    }    
    button.send-comment {    
      background: #0f172a;    
      color: #7dd3fc;    
      border: none;    
      padding: 10px 16px;    
      border-radius: 10px;    
      cursor: pointer;    
      font-weight: bold;    
      font-family: 'Amiri', serif;    
      transition: background-color 0.3s, color 0.3s;    
    }    
    button.send-comment:disabled {    
      background: #334155;    
      color: #7dd3fcaa;    
      cursor: not-allowed;    
    }   
  
    #authButtons button {  
  background: var(--button-bg);  
  color: var(--text-accent);  
  border: none;  
  padding: 10px 18px;  
  border-radius: 10px;  
  font-weight: bold;  
  font-family: 'Amiri', serif;  
  cursor: pointer;  
  margin: 6px;  
  transition: background 0.3s;  
}  
#authButtons button:hover {  
  background: var(--button-hover-bg);  
}  
  
#userInfo {  
  margin-top: 10px;  
  font-size: 0.95rem;  
  color: var(--text-secondary);  
  background: rgba(255,255,255,0.05);  
  padding: 8px 12px;  
  border-radius: 8px;  
  display: inline-block;  
}  
    
    /* ÿ£ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ™ŸÜŸÇŸÑ */    
    .nav-buttons {    
      display: flex;    
      justify-content: space-between;    
      margin-top: 40px;    
    }    
    .nav-buttons a {  
  background: linear-gradient(135deg, #0f172a, #1e293b);  
  color: var(--text-accent);  
  padding: 10px 18px;  
  border-radius: 10px;  
  text-decoration: none;  
  font-weight: bold;  
  transition: background 0.3s;  
  border: 1px solid var(--glow-color);  
  box-shadow: 0 0 12px #38bdf855;  
}  
.nav-buttons a:hover {  
  background: var(--button-hover-bg);  
}   
  
    /* ÿ≥ÿ≠ÿßÿ®ÿ© ÿßŸÑÿ™ÿπŸÑŸäŸÇÿßÿ™ ÿ™ÿ∏Ÿáÿ± ÿπŸÑŸâ ÿßŸÑŸäÿ≥ÿßÿ± Ÿàÿ™ÿ∫ÿ∑Ÿä ÿ¨ÿ≤ÿ° ŸÖŸÜ ÿßŸÑÿ¥ÿßÿ¥ÿ© */  
.comment-box-overlay {  
  position: fixed;  
  top: 80px;  
  left: 0;  
  width: 320px;  
  max-height: 85vh;  
  overflow-y: auto;  
  background: rgba(15, 23, 42, 0.95);  
  border: 2px solid #38bdf8;  
  border-radius: 0 12px 12px 0;  
  padding: 16px;  
  box-shadow: 6px 0 20px #38bdf8aa;  
  z-index: 9999;  
  display: none;  
  transition: transform 0.3s ease;  
}  
  
/* ÿ≤ÿ± ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑÿ≥ÿ≠ÿßÿ®ÿ© */  
.comment-box-overlay .close-btn {  
  background: transparent;  
  border: none;  
  color: #7dd3fc;  
  font-size: 22px;  
  font-weight: bold;  
  cursor: pointer;  
  position: absolute;  
  top: 10px;  
  right: 12px;  
    }  
    @media (max-width: 600px) {  
  .comment-box-overlay {  
    width: 100%;  
    border-radius: 0;  
    left: 0;  
  }  
  }  
  
    #voteBar {  
  position: fixed;  
  bottom: 15px;  
  right: 20px;  
  background: rgba(15, 23, 42, 0.9);  
  padding: 10px 14px;  
  border-radius: 16px;  
  box-shadow: 0 0 15px #38bdf8aa;  
  z-index: 10000;  
  display: flex;  
  align-items: center;  
  gap: 12px;  
}  
  
#voteBtn {  
  font-size: 22px;  
  background: none;  
  border: none;  
  color: #f87171;  
  cursor: pointer;  
  transition: transform 0.3s;  
}  
  
#voteBtn:hover {  
  transform: scale(1.2);  
}  
  
#voteCount {  
  font-family: 'Amiri', serif;  
  font-size: 0.95rem;  
  color: #7dd3fc;  
}  
  
#heartExplosion {  
  position: fixed;  
  top: 0; left: 0; right: 0; bottom: 0;  
  pointer-events: none;  
  z-index: 9999;  
      }  
    .comment-box.reply {
  font-family: 'Amiri', serif;
  background-color: rgba(15, 23, 42, 0.85);
  border-left: 3px solid #7dd3fc;
  margin-top: 6px;
  color: #a0cfff;
  padding: 6px 12px;
  border-radius: 8px;
}
.reply-btn {
  background: none;
  border: none;
  color: #38bdf8;
  cursor: pointer;
  font-size: 0.85rem;
  margin-top: 4px;
}
.reply-btn:hover {
  text-decoration: underline;
}
.send-comment {
  background: #0f172a;
  color: #7dd3fc;
  border: none;
  padding: 6px 12px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
  font-family: 'Amiri', serif;
  transition: background-color 0.3s, color 0.3s;
}
.send-comment:hover {
  background-color: #1e293b;
} 
      
  </style>      
</head>      
      
<body>  
  <header>      
    <div class="logo-wrapper">      
      <img src="https://i.ibb.co/jkcmR2L0/Picsart-25-06-28-13-01-01-547.jpg" alt="ÿ¥ÿπÿßÿ± ÿ¢ÿ´Ÿäÿ±Ÿäÿßÿ™ ÿßŸÑÿπŸÜŸÇÿßÿ°" />      
    </div>      
  </header>      
      
  <nav class="main-nav">      
    <a href="index.html">üè† ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</a>      
    <a href="https://www.instagram.com/carlasilvator" target="_blank">üì∏ ÿ£ŸÜÿ≥ÿ™ÿ∫ÿ±ÿßŸÖŸä</a>      
    <a href="follow-me.html">üß¨ ÿßÿ¥ÿ™ÿ±ŸÉ</a>      
  </nav>      
      
  <div class="container">      
    <h2 class="story-title">ÿ®ŸäŸÑÿßÿØŸàŸÜÿß ÿßŸÑÿ≥ÿßŸÖÿ©</h2>      
      
    <div id="authButtons">      
      <button id="loginBtn">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ®ŸÄ Google</button>      
      <button id="logoutBtn" style="display:none;">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨</button>      
      <div id="userInfo"></div>      
    </div>      
      
    <div id="raw-content" style="display:none;">      
          
~ÿßŸÑŸÖŸÇÿØŸÖÿ©~    
    
¬´ŸÉÿßŸÜÿ™ ŸÖÿ´ŸÑ ÿßŸÑÿ®ŸäŸÑÿßÿØŸàŸÜÿß ÿ™ÿ≤Ÿáÿ± ŸÅŸä ÿßŸÑÿ∏ŸÑÿßŸÖ ŸÑÿ™ÿ∫ÿ±Ÿä ÿßŸÑŸÜÿßÿ∏ÿ±ŸäŸÜ ÿ®ŸÅÿ™ŸÜÿ© ÿ¨ŸÖÿßŸÑŸáÿß ÿßŸÑÿ≥ÿßÿ≠ÿ± Ÿà ÿ™ÿÆŸÅŸä ÿ®ŸäŸÜ ÿ∑Ÿäÿßÿ™Ÿáÿß ÿ≥ŸÖŸáÿß ÿßŸÑŸÇÿßÿ™ŸÑ ŸÖŸàŸÇÿπÿ© ÿßŸÑÿ™ÿßÿ¶ŸáŸäŸÜ ÿπŸÑŸâ ÿ£ÿ±ÿ∂ ÿßŸÑÿ¨ŸÜŸàŸÜ ŸÅŸä ŸÅÿÆŸàÿÆŸáÿß ŸÖŸÜÿ™ÿ∏ÿ±ÿ© ŸàŸÇÿ™ ÿ£ŸÇÿßŸÖÿ© ÿßŸÑÿ≠ÿØÿßÿØ ÿπŸÑŸâ ÿ£ÿ±Ÿàÿßÿ≠ŸáŸÖ ÿßŸÑŸÖÿπÿ∞ÿ®ÿ© ÿ®ÿ≥ŸÖŸàŸÖŸáÿß¬ª    
    
    
    
ÿ£ŸáŸÑÿßŸã ÿ®ŸÉ ŸÅŸä ÿ£ÿ±ÿ∂ ÿßŸÑÿ¨ŸÜŸàŸÜ    
Ÿäÿß ŸÖŸÜ ŸÇÿ±ÿ±ÿ™ ÿ®ÿ≠ŸÖÿßŸÇÿ© ŸÑÿ∞Ÿäÿ∞ÿ© ÿ£ŸÜ ÿ™ŸÅÿ™ÿ≠ ÿ±ŸàÿßŸäÿ™Ÿä    
ÿ≠Ÿäÿ´ ÿßŸÑŸÖŸÜÿ∑ŸÇ Ÿäÿ∞ÿ®ÿ≠ Ÿà ÿßŸÑÿπŸèŸÇŸÑÿßÿ° Ÿäÿ§ŸÉŸÑŸàŸÜ ÿßŸàŸÑÿßŸã..    
    
    
    
    
    
ÿ£ŸÜ ŸÉŸÜÿ™ ŸÇÿßÿ±ÿ¶ ÿ®ÿ™ŸÅŸÉŸäÿ± ÿ£ÿ¨ÿ±ÿßŸÖŸä Ÿà ÿ≥ÿßŸäŸÉŸà ŸÅŸÄ ÿ±ÿ≠ ÿ™ŸÉŸàŸÜ ÿ∑ÿ®ŸÇ ÿßŸÑÿ™ÿ≠ŸÑŸäÿ© ÿπŸÑŸâ ŸÖÿßÿ¶ÿØÿ™Ÿä ŸÑÿ£ŸÜ ÿπŸÇŸÑŸÉ ÿ≥ŸäŸÉŸàŸÜ ÿßŸÑÿ£ŸÑÿ∞ ÿ∑ÿπŸÖÿßŸã     
    
    
ÿ¥ÿØŸàÿß ÿßŸÑÿ£ÿ≠ÿ≤ŸÖÿ©     
ÿ£Ÿà ŸÑÿß ÿ™ŸÅÿπŸÑŸàÿß     
ŸÑŸÉŸÜ ŸÑÿß ÿ™ŸÑŸàŸÖŸàŸÜŸä ÿ®ÿπÿØ ÿ≥ŸÇŸàÿ∑ŸÉŸÖ     
    
    
ŸÑÿß ÿ™ÿ´ŸÇ ÿ®ÿ£ÿ≠ÿØ ŸÅŸÉŸÑ ÿ¥ÿÆÿµŸäÿ© ŸáŸÜÿß ŸáŸä ÿ¥Ÿäÿ∑ÿßŸÜ ŸÖÿ™ŸÜŸÉÿ±..    
ŸÑÿß ÿ®ÿ∑ŸÑ ŸäŸÜŸÇÿ∞    
Ÿà ŸÑÿß ÿ®ÿ∑ŸÑÿ© ÿ™ÿ®ŸÉŸä     
ŸÑÿß ÿ∂ÿ≠Ÿäÿ© ÿßŸÑŸÉŸÑ ŸÖÿ∞ŸÜÿ®    
ÿ≠ÿ™Ÿâ ÿ£ŸÜÿ™ ŸÑÿ£ŸÜŸÉ ÿ≥ÿ™ŸÇÿ±ÿ£ ŸÉŸÑ Ÿáÿ∞ÿß ÿßŸÑÿ¥ÿ±     
ŸÑÿ£ŸÜŸÉ ÿ≥ÿ™ÿ™ÿ£ÿ´ÿ± ÿ®Ÿá     
ÿ£ÿπŸÑŸÖ Ÿáÿ∞ÿß ÿ¨ŸäÿØÿßŸã ŸÅÿ£ŸÜÿß ÿßŸÑŸÖÿÆÿ±ÿ¨ÿ© ŸÉŸÑ ÿ¥Ÿäÿ° Ÿäÿ≥Ÿäÿ± ÿ≠ÿ≥ÿ® ÿ±ÿ∫ÿ®ÿ™Ÿä Ÿàÿ≠ÿØŸä    
    
    
ÿØÿπŸÜŸä ÿ£ÿπÿ∑ŸäŸÉ ÿØŸàÿ±ŸÉ Ÿäÿßÿπÿ≤Ÿäÿ≤Ÿä ÿ£ŸÜÿ™ ÿßŸÑÿ¥ÿßŸáÿØÿü..    
    
ŸÑÿß ÿ£ÿ≥ŸÅÿ© ÿÆŸÑŸäŸÜŸä ÿ£ÿµÿ≠ÿ≠ ÿ£ŸÜÿ™ ÿ¥ÿßŸáÿØ Ÿà ŸÖÿ¥ÿßÿ±ŸÉ ÿ±ÿ∫ŸÖÿßŸã ÿπŸÜŸÉ¬† ŸÅŸä ÿ≠ÿ±ÿ® ŸÑÿß ŸÇÿßŸÜŸàŸÜ Ÿäÿ≠ŸÉŸÖŸáÿß ÿ®ŸäŸÜ Ÿáÿ∞Ÿá ÿßŸÑÿ¥Ÿäÿßÿ∑ŸäŸÜÿå ÿ≠ÿ±ÿ® ÿßŸÑÿπÿ¥ŸÇ Ÿà ÿßŸÑÿ≥ŸÑÿ∑ÿ© ÿ¨ŸÜŸàŸÜ ÿßŸÑŸáŸàÿ≥ Ÿà ÿßŸÑÿÆŸäÿßŸÜÿßÿ™ ÿßŸÑÿπÿ∏ŸÖŸâ..     
    
    
    
    
Ÿà Ÿäÿß ÿ£ÿ±Ÿàÿßÿ≠Ÿä ÿßŸÑÿ¥ŸÅŸÇŸäÿ© ÿ£ÿ≠ÿ∞ÿ±ŸÉŸÖ ŸÖŸÜ ÿ≤Ÿáÿ±ÿ™Ÿä ÿßŸÑÿ≥ÿßŸÖÿ© ŸÑÿß ÿ™ÿØÿπŸàŸáÿß ÿ™ÿ≥ÿ≠ÿ±ŸÉŸÖ Ÿà ÿ™ŸÇŸäŸÖ ÿßŸÑÿ≠ÿØÿßÿØ ÿπŸÑŸâ ÿ£ÿ±Ÿàÿßÿ≠ŸÉŸÖ ÿßŸÑŸÖŸÅÿ™ŸàŸÜÿ©    
ŸÑÿß ÿ™ŸÇÿ™ÿ±ÿ®Ÿàÿß    
ŸÑÿß ÿ™ŸÜÿÆÿØÿπŸàÿß     
Ÿà ŸÑÿß ÿ™ŸÇÿπŸàÿß ÿ®ÿ≠ÿ®Ÿáÿß    
ÿ•ŸÑÿß ÿ£ŸÜ ÿ±ÿ∫ÿ®ÿ™ŸÖ ÿ®ÿ£ŸÜ ÿ™ÿØŸÅŸÜŸàÿß ÿ£ÿ≠Ÿäÿßÿ° Ÿáÿ∞ÿß ŸäÿπŸàÿØ ŸÑŸÉŸÖ...     
    
    
    
    
ÿ≠ÿ™Ÿâ ÿ£ŸÜ ŸÑŸÖ ÿ™ÿ±ÿ∫ÿ® ÿ®ÿßŸÑÿ≥ŸÇŸàÿ∑ Ÿäÿ§ÿ≥ŸÅŸÜŸä    
ÿ£ŸÜŸÉ ÿ≥ÿ™ŸÇÿπ ÿ®ÿßŸÑÿ™ÿ£ŸÉŸäÿØ..     
ÿßŸÑÿ¨ŸÖŸäÿπ ŸäŸÇÿπ.     
ÿ®ŸäŸÜŸÖÿß ÿ£ŸÜÿß ÿ£ÿ¥ÿßŸáÿØŸÉŸÖ ÿ®ÿ£ÿ®ÿ™ÿ≥ÿßŸÖÿ©    
    
Ÿà ŸÉŸÑ Ÿáÿ∞ÿß ÿßŸÑÿ≥ŸÇŸàÿ∑ Ÿäÿ¨ÿπŸÑŸÜŸä ÿßÿ≥ÿ£ŸÑ ŸáŸÑ ÿßŸÑÿ®ÿ∑ŸÑÿ© ÿ™ÿ≥ÿ™ÿ≠ŸÇ ÿßŸÜ ÿ™ŸÇÿπŸàÿß ÿ®ÿ≠ÿ®Ÿáÿß Ÿà ÿ™ÿØŸÅŸÜŸàÿß ÿ£ÿ≠Ÿäÿßÿ° ŸÑÿ£ÿ¨ŸÑŸáÿßÿü    
    
ÿ£ŸÖ ÿ£ŸÜŸÉŸÖ ÿ≥ÿ™ŸÉÿ±ŸáŸàŸÜŸáÿß ŸÅŸä ÿßŸÑŸÜŸáÿßŸäÿ© Ÿà ÿ™ŸÜÿØŸÖŸàŸÜÿü    
    
ÿØÿπŸàŸÜŸä ÿ£ÿπÿ±ŸÅŸÉŸÖ ÿπŸÑŸâ ŸÜŸÅÿ≥Ÿä ÿ£ŸÜÿß ÿ¢ÿ´Ÿäÿ±.. ÿπŸÜŸÇÿßÿ° ÿßŸÑŸÖŸàÿ™ ŸÑÿ≥ÿ™ ŸÉÿßÿ™ÿ®ÿ© ÿ£ŸÜÿß ÿßŸÑŸÖÿÆÿ±ÿ¨ÿ© ÿßŸÑÿ¥ÿ±Ÿäÿ±ÿ© ÿßŸÑÿ™Ÿä ÿµŸÜÿπÿ™ Ÿáÿ∞Ÿá ÿßŸÑŸÖÿ¨ÿ≤ÿ±ÿ© ÿßŸÑÿπÿßÿ∑ŸÅŸäÿ©    
    
Ÿà ŸÉŸÖÿß ŸäŸÇŸàŸÑŸàŸÜ ÿ£ŸÜÿß ŸÑÿ≥ÿ™ ŸÅŸÜÿßŸÜÿ© ÿßŸÜÿß ÿßŸÑŸÅŸÜ ÿßŸÑÿ≥ŸàÿØÿßŸàŸä    
    
Ÿà Ÿáÿ∞Ÿá ŸáŸä ÿ≤Ÿáÿ±ÿ™Ÿä ÿßŸÑÿ≥ÿßŸÖÿ© ÿ±ŸàÿßŸäÿ™Ÿä ÿßŸÑÿ£ŸàŸÑŸâ ŸÖŸÜ ÿ≥ŸÑÿ≥ŸÑÿ©     
_ÿ£ÿ®ÿ™ÿ≥ŸÖ ÿ£ŸäŸáÿß ÿßŸÑÿ¥Ÿäÿ∑ÿßŸÜ..     
    
ÿßŸÑÿ¥Ÿäÿ∑ÿßŸÜ ÿ≥Ÿäÿ®ÿ™ÿ≥ŸÖ ŸÅŸä ÿßŸÑŸÜŸáÿßŸäÿ© ŸÑÿ£ŸÜÿ™ÿµÿßÿ±Ÿá Ÿà Ÿáÿ∞Ÿá ÿßŸÑŸÉÿßÿ™ÿ®ÿ© ÿ≥ÿ™ÿµŸÅŸÇ ŸÑŸá ÿ®ÿ≠ÿ±ÿßÿ±ÿ©    
    
    
    
    
    
    
    
    
ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ŸÇÿ®ŸÑ ÿßŸÑÿ®ÿØÿ° ÿ®ÿ±ÿ≠ŸÑÿ© ÿßŸÑŸáŸÑÿßŸÉ:    
    
‚Ä¢ÿßŸÑÿ±ŸàÿßŸäÿ© ŸÇÿØ ŸÑÿß ÿ™ŸÜÿßÿ≥ÿ® ÿßŸÑÿ®ÿπÿ∂ ŸÑÿ£ÿ≠ÿ™Ÿàÿßÿ¶Ÿáÿß ÿπŸÑŸâ ÿ™ŸÅÿßÿµŸäŸÑ ÿØŸÖŸàŸäÿ© ŸÖŸÅÿµŸÑÿ© Ÿà ŸÖÿ¥ÿßŸáÿØ ÿ≠ÿßÿØÿ©    
    
‚Ä¢ÿßŸÑÿ™ÿµŸÜŸäŸÅ: ÿ£ŸÉÿ¥ŸÜ_ÿ∫ŸÖŸàÿ∂_ ŸÜŸÅÿ≥Ÿä_ÿÆŸäÿßŸÑ ÿπŸÑŸÖŸä _ÿØŸÖŸàŸä _Dark romance ÿØÿßÿ±ŸÉ ÿ±ŸàŸÖÿßŸÜÿ≥    
    
ŸÖŸÜ ÿ£ÿπÿØÿßÿ° ÿ•ŸÑŸâ ÿ£ÿ≠ÿ®ÿßÿ° ‚üµ ÿ´ŸÖ ŸÖŸÜ ÿ£ÿ≠ÿ®ÿßÿ° ÿ•ŸÑŸâ ÿ£ÿπÿØÿßÿ°     
    
¬†    
‚Ä¢ÿßŸÑÿ™ŸÜÿ≤ŸäŸÑ ÿ≠ÿ≥ÿ® ÿßŸÑÿ™ŸÅÿßÿπŸÑ ÿ±ŸÉÿ≤Ÿàÿß ÿπŸÑŸâ Ÿáÿ∞Ÿá ÿßŸÑŸÜŸÇÿ∑ÿ©    
    
    
‚Ä¢ÿßŸÜ ŸÉŸÜÿ™ ÿ™ÿ®ÿ≠ÿ´ ÿπŸÜ ÿ±ŸàÿßŸäÿ© ÿ®ÿπŸàÿßŸÑŸÖ Ÿàÿ±ÿØŸäÿ© ŸÑÿ∑ŸäŸÅÿ© ŸÅŸÇÿØ ÿ£ÿÆÿ∑ÿ£ÿ™ ÿßŸÑÿπŸÜŸàÿßŸÜ ŸÉŸÑ ŸÖÿß ŸäŸàÿ¨ÿØ ŸáŸÜÿß ŸáŸà Ÿàÿ±ÿØ ÿ≥ÿßŸÖ ÿ®ÿ£ŸÑŸàÿßŸÜ ÿ≤ÿßŸáŸäÿ© ŸÑŸÉŸÜŸá ŸÇÿßÿ™ŸÑ     
ŸÑÿ∞ÿß ÿ£ÿÆÿ±ÿ¨ ÿ£ŸÜ ŸÑŸÖ ÿ™ŸÉŸÜ ŸÖŸÜ ŸÖÿ≠ÿ®Ÿä ÿßŸÑŸÖŸàÿ™     
ÿπŸÑŸâ ÿ£ŸäÿØŸä ŸÉÿßÿ™ÿ®ÿ© ŸÖŸáŸàŸàÿ≥ÿ© ÿ®ÿ£ŸÉŸÑ ÿπŸÇŸàŸÑ ÿßŸÑŸÇÿ±ÿßÿ°    
    
    
    
‚Ä¢ÿßŸÑŸÖÿ¥ÿßŸáÿØ ÿßŸÑÿ¨ŸÜÿ≥Ÿäÿ© ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØÿ© ÿ£ŸÜÿß ÿ£ÿ±ŸÇŸâ ÿ®ŸÉÿ´Ÿäÿ± ŸÖŸÜ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑŸÖÿ™ÿØŸÜŸä     
    
‚Ä¢ÿßŸÑÿ£ŸÜÿ™ŸÇÿßÿØ ŸÖŸÇÿ®ŸàŸÑ ŸÑŸÉŸÜ ÿ®ÿ£ÿ≠ÿ™ÿ±ÿßŸÖ Ÿáÿ∞Ÿá ÿ±ŸàÿßŸäÿ™Ÿä ŸÖŸà ŸÖÿ∑ÿπŸÖ ÿ∑ŸÑÿ®ÿßÿ™ ŸäŸÑÿ®Ÿä ÿ±ÿ∫ÿ®ÿßÿ™ŸÉ ŸÑÿ∞ÿß ŸÑÿß ÿ™ŸÑÿ®ÿ≥ ŸÇŸÜÿßÿπ ÿßŸÑŸÖŸáÿ±ÿ¨ ÿßŸÑŸÖÿ™ŸÜŸÉÿ± ÿ®ÿ´Ÿàÿ® ÿßŸÑŸÜÿßŸÇÿØ ÿ£ÿ™ŸÅŸÇŸÜÿßÿü    
    
‚Ä¢ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÇ ŸÖÿ≠ŸÅŸàÿ∏ÿ© ŸÑŸä Ÿà ÿßŸÑÿ£ŸÇÿ™ÿ®ÿßÿ≥ ÿØŸàŸÜ ÿ£ÿ∞ŸÜŸä ŸáŸà ŸÅÿπŸÑ ÿ∫ÿ®Ÿä ÿ¨ÿØÿßŸã ŸÑÿ£ŸÜŸÜŸä ÿ≥ÿ£ŸÖÿ≥ÿ≠ ÿ®ŸÉÿ±ÿßŸÖÿ™ŸÉ ÿßŸÑÿ£ÿ±ÿßÿ∂Ÿä Ÿà ÿ≥ÿ£ÿ®ÿØÿ° ÿ®ŸÄ Ÿäÿß ÿπÿ≤Ÿäÿ≤Ÿä Ÿà ÿ£ÿÆÿ™ŸÖŸáÿß ÿ®ŸÇÿ®ŸÑÿßÿ™ ÿ≠ÿßÿ±ÿ© ÿπŸÑŸâ ÿ¨ÿ´ÿ© ŸÉÿ±ÿßŸÖÿ™ŸÉ ÿßŸÑŸÇÿ∞ÿ±ÿ©    
    
    
⁄§ŸàŸÑÿß Ÿäÿß ÿ£ÿ±Ÿàÿßÿ≠ ÿßŸÑÿ¥ŸÅŸÇ Ÿà ŸÑÿß ÿ™ŸÜÿ≥Ÿàÿß ÿ£ŸÜÿß ÿ≠ÿ∞ÿ±ÿ™ŸÉŸÖ    
ÿ£ŸÜ ŸÉŸÜÿ™ ÿπÿßŸÇŸÑ ŸÅÿ£Ÿáÿ±ÿ®     
Ÿà ÿ£ŸÜ ÿ®ŸÇŸäÿ™ ŸÅÿ£ŸáŸÑÿßŸã ÿ®ŸÉ Ÿäÿ≥ÿ±ŸÜŸä ÿßŸÜ ÿ£ÿ®ÿØÿ£ ÿ®ÿßŸÑÿ™ÿÆÿ∑Ÿäÿ∑ ŸÑÿ±ÿ≥ŸÖ ÿ≠ÿ®ŸÉÿ© ÿ≥ÿ™ÿ∑ÿ®ÿÆ ÿπŸÇŸÑŸÉ ŸÇÿ®ŸÑ Ÿàÿ∂ÿπŸá ŸáŸÑŸâ ŸÖÿßÿ¶ÿØÿ™Ÿä    
    
ÿ®ÿØÿ£ÿ™ ŸÅŸä: 27 ÿ£ŸÉÿ™Ÿàÿ®ÿ± /ÿπÿßŸÖ 2024    
    
ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ£ŸÜÿ™Ÿáÿßÿ°: ÿ≠ŸäŸÜŸÖÿß ÿ™ÿµÿ®ÿ≠ ŸÖŸáŸàŸàÿ≥ÿßŸã    
ÿ®ÿßŸÑŸÑÿπŸÜÿßÿ™ ÿßŸÑÿ™Ÿä ÿ£ŸÉÿ™ÿ®Ÿáÿß     
ÿßŸÑÿ∂ÿ≠Ÿäÿ© ÿ£ŸÜÿ™     
ÿßŸÑŸÖÿ∞ŸÜÿ®ÿ© ÿßŸÜÿß ÿßŸÑÿ™Ÿä ÿ™ÿπÿ¥ŸÇ ÿ£ŸÉŸÑ ÿπŸÇŸàŸÑ ÿßŸÑŸÇÿ±ÿßÿ°    
    
    </div>      
      
    <div id="rendered-content"></div>      
      
       <div class="nav-buttons">   
      <a href="#" id="prevBtn">‚¨ÖÔ∏è ÿßŸÑÿ®ÿßÿ±ÿ™ ÿßŸÑÿ≥ÿßÿ®ŸÇ</a>      
      <a href="#" id="nextBtn">ÿßŸÑÿ®ÿßÿ±ÿ™ ÿßŸÑÿ™ÿßŸÑŸä ‚û°Ô∏è</a>      
    </div>      
  </div>  

  <footer style="text-align:center; padding:15px 0; color: #7dd3fc; font-family: 'Amiri', serif; font-size: 0.9rem;">
  ÿ≠ŸÇŸàŸÇ ÿßŸÑŸÜÿ¥ÿ± ŸÖÿ≠ŸÅŸàÿ∏ÿ©ÿå ŸàŸÉŸÑ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ∫Ÿäÿ± ŸÖÿ±ÿÆÿµ Ÿäÿπÿ±ÿ∂ ÿµÿßÿ≠ÿ®Ÿá ŸÑŸÑŸÖÿ≥ÿßÿ°ŸÑÿ© ÿßŸÑŸÇÿßŸÜŸàŸÜŸäÿ© ‚Äî ¬© 2025
</footer>

<div id="actionBar" style="
  position: fixed;     
  bottom: 0;     
  width: 100%;     
  background: #0f172a;     
  color: #7dd3fc;     
  font-family: 'Amiri', serif;     
  display: flex;     
  justify-content: center;     
  gap: 30px;     
  padding: 10px 0;     
  border-top: 1px solid #38bdf8;     
  z-index: 9999;">
  <button id="voteBtn" style="background:none; border:none; color:#e0245e; font-size: 24px; cursor: pointer;">‚ù§Ô∏è</button>    
  <span id="voteCount">0 ÿ™ÿµŸàŸäÿ™</span>    
  <span id="readCount">0 ŸÇÿ±ÿßÿ°ÿ©</span>    
  <span id="commentCount">0 ÿ™ÿπŸÑŸäŸÇ</span>    
</div>

<!-- ŸÇŸÑŸàÿ® ÿßŸÑÿ™ÿµŸàŸäÿ™ ÿßŸÑŸÖÿ™ŸÅÿ¨ÿ±ÿ© -->
<div id="heartExplosion" style="position: fixed; bottom: 60px; left: 0; width: 100%; height: 0; pointer-events: none; z-index: 9998;"></div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

<script>
// üî• ÿ•ÿπÿØÿßÿØ Firebase  
const firebaseConfig = {  
  apiKey: "AIzaSyBtTc7yWNfNkG0oVSbpq0V9A6DHTgZoGBM",  
  authDomain: "works-rawan.firebaseapp.com",  
  projectId: "works-rawan",  
  storageBucket: "works-rawan.appspot.com",  
  messagingSenderId: "986254083746",  
  appId: "1:986254083746:web:17f7db0389c94473f0b9fb"  
};  

firebase.initializeApp(firebaseConfig);  
const auth = firebase.auth();  
const db = firebase.firestore();  
  
let currentUser = null;  
const loginBtn = document.getElementById("loginBtn");
const logoutBtn = document.getElementById("logoutBtn");
const userInfo = document.getElementById("userInfo");

auth.onAuthStateChanged(user => {  
  currentUser = user;  
  if (user) {  
    if (loginBtn) loginBtn.style.display = "none";  
    if (logoutBtn) logoutBtn.style.display = "inline-block";  
    if (userInfo) userInfo.textContent = `ŸÖÿ±ÿ≠ÿ®ÿßŸãÿå ${user.displayName || user.email}`;  
  } else {  
    if (loginBtn) loginBtn.style.display = "inline-block";  
    if (logoutBtn) logoutBtn.style.display = "none";  
    if (userInfo) userInfo.textContent = "";  
  }  
});  
  
if (loginBtn) loginBtn.onclick = () => {  
  const provider = new firebase.auth.GoogleAuthProvider();  
  auth.signInWithPopup(provider).catch(console.error);  
};  

if (logoutBtn) logoutBtn.onclick = () => auth.signOut();  

// üìñ ÿßŸÑŸÄ partId ÿ´ÿßÿ®ÿ™ ÿ≠ÿ≥ÿ® ÿßŸÑÿ®ÿßÿ±ÿ™ ÿßŸÑÿ≠ÿßŸÑŸä
const partId = "part-toxic-1"; 

// üí¨ ÿ™ŸàŸÑŸäÿØ ÿßŸÑŸÅŸÇÿ±ÿßÿ™ ŸÖÿπ ÿ≤ÿ± ÿßŸÑÿ™ÿπŸÑŸäŸÇ
function renderParagraphs(partId) {  
  const raw = document.getElementById("raw-content").innerText.trim();  
  const container = document.getElementById("rendered-content");  
  container.innerHTML = "";  
  
  const paragraphs = raw.split(/\n\s*\n/);  
  
  paragraphs.forEach((text, index) => {  
    const paraId = `${partId}-paragraph-${index + 1}`;  
  
    const wrapper = document.createElement("div");  
    wrapper.style.position = "relative";  
    wrapper.style.paddingRight = "40px";  
    wrapper.style.marginBottom = "28px";  
  
    const commentBtn = document.createElement("button");  
    commentBtn.textContent = "üí¨";  
    commentBtn.style.cssText = `  
      position: absolute;  
      right: 0;  
      top: 0;  
      background: none;  
      border: none;  
      font-size: 20px;  
      cursor: pointer;  
      color: #7dd3fc;  
    `;  
    commentBtn.onclick = () => openCommentBox(paraId);  
  
    const p = document.createElement("div");  
    p.id = paraId;  
    p.textContent = text.trim();  
    p.style.cssText = `  
      font-size: 1.05rem;  
      line-height: 1.9;  
      font-family: 'Amiri', serif;  
      color: #cfefff;  
      white-space: pre-line;  
    `;  
  
    wrapper.appendChild(commentBtn);  
    wrapper.appendChild(p);  
    container.appendChild(wrapper);  
  });  
}  
  
// üí¨ ŸÅÿ™ÿ≠ ÿµŸÜÿØŸàŸÇ ÿßŸÑÿ™ÿπŸÑŸäŸÇÿßÿ™ ŸÖÿπ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ÿπŸÑŸäŸÇÿßÿ™ ŸàÿßŸÑÿ±ÿØŸàÿØ
function openCommentBox(paragraphId) {
  const overlay = document.createElement("div");
  overlay.className = "comment-box-overlay";
  overlay.innerHTML = `
    <button class="close-btn" onclick="this.parentElement.remove()">√ó</button>
    <div class="comments" id="comments-${paragraphId}">ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ÿπŸÑŸäŸÇÿßÿ™...</div>
    <textarea placeholder="ÿßŸÉÿ™ÿ® ÿ™ÿπŸÑŸäŸÇŸÉ ŸáŸÜÿß..." id="textarea-${paragraphId}"></textarea>
    <button class="send-comment" onclick="sendComment('${paragraphId}')">ÿ•ÿ±ÿ≥ÿßŸÑ</button>
  `;
  document.body.appendChild(overlay);

  const commentsContainer = overlay.querySelector(`#comments-${paragraphId}`);

  // ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ÿπŸÑŸäŸÇÿßÿ™ ŸÖÿπ ÿßŸÑÿ±ÿØŸàÿØ
  db.collection("comments")
    .where("paragraphId", "==", paragraphId)
    .orderBy("timestamp", "asc")
    .get()
    .then(snapshot => {
      if (snapshot.empty) {
        commentsContainer.innerHTML = "<div>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ÿπŸÑŸäŸÇÿßÿ™ ÿ®ÿπÿØ.</div>";
      } else {
        commentsContainer.innerHTML = "";
        // ÿ£ŸàŸÑŸãÿß ŸÜÿπÿ±ÿ∂ ÿßŸÑÿ™ÿπŸÑŸäŸÇÿßÿ™ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© (ÿ®ÿØŸàŸÜ parentId)
        snapshot.forEach(doc => {
          const data = doc.data();
          if (!data.parentId) {
            const commentDiv = createCommentDiv(doc.id, data, paragraphId);
            commentsContainer.appendChild(commentDiv);
          }
        });
        // ÿ®ÿπÿØ ÿπÿ±ÿ∂ ÿßŸÑÿ™ÿπŸÑŸäŸÇÿßÿ™ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©ÿå ŸÜÿπÿ±ÿ∂ ÿßŸÑÿ±ÿØŸàÿØ ÿ™ÿ≠ÿ™ ŸÉŸÑ ÿ™ÿπŸÑŸäŸÇ
        snapshot.forEach(doc => {
          const data = doc.data();
          if (data.parentId) {
            const parentComment = document.getElementById(`comment-${data.parentId}`);
            if (parentComment) {
              const repliesContainer = parentComment.querySelector(".replies");
              const replyDiv = createReplyDiv(doc.id, data);
              if (repliesContainer) repliesContainer.appendChild(replyDiv);
            }
          }
        });
        // ÿ™ŸÅÿπŸäŸÑ ÿ≤ÿ± "ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ≤ŸäÿØ" ŸÑŸÑÿ±ÿØŸàÿØ ÿ•ŸÜ Ÿàÿ¨ÿØÿ™
        setupReplyToggle();
      }
    });
}

// ÿ•ŸÜÿ¥ÿßÿ° div ÿ™ÿπŸÑŸäŸÇ ÿ±ÿ¶Ÿäÿ≥Ÿä ŸÖÿπ ÿ≤ÿ± ÿßŸÑÿ±ÿØ Ÿàÿ≠ÿßŸàŸäÿ© ÿßŸÑÿ±ÿØŸàÿØ
function createCommentDiv(id, data, paragraphId) {
  const div = document.createElement("div");
  div.className = "comment-box";
  div.id = `comment-${id}`;
  div.style.marginBottom = "16px";
  div.innerHTML = `
    <b>${data.user || "ŸÖÿ¨ŸáŸàŸÑ"}:</b> ${data.text}<br>
    <button class="reply-btn" onclick="toggleReplyForm('${id}')">ÿ±ÿØ</button>
    <div class="reply-form-container" id="reply-form-${id}" style="display:none; margin-top: 8px;">
      <textarea id="reply-text-${id}" placeholder="ÿßŸÉÿ™ÿ® ÿ±ÿØŸÉ ŸáŸÜÿß..." style="width: 100%; border-radius: 8px; border: 1px solid #38bdf8; background: #020611; color: #cfefff; padding: 6px;"></textarea>
      <button class="send-comment" style="margin-top:4px;" onclick="sendReply('${paragraphId}', '${id}')">ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿØ</button>
    </div>
    <div class="replies" style="margin-left: 20px; margin-top: 8px; max-height: 280px; overflow-y: auto; border-left: 2px solid #38bdf8; padding-left: 8px; position: relative;">
      <div class="show-more-container" style="text-align: center; margin-top: 6px; display:none;">
        <button class="show-more-btn" onclick="showMoreReplies(this)">ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ≤ŸäÿØ</button>
      </div>
    </div>
  `;
  return div;
}

// ÿ•ŸÜÿ¥ÿßÿ° div ÿ±ÿØ
function createReplyDiv(id, data) {
  const div = document.createElement("div");
  div.className = "comment-box reply";
  div.id = `comment-${id}`;
  div.style.marginBottom = "12px";
  div.style.fontSize = "0.9rem";
  div.style.color = "#a0cfff";
  div.style.border = "1px solid #38bdf8aa";
  div.style.borderRadius = "10px";
  div.style.padding = "6px 10px";
  div.style.background = "rgba(15, 23, 42, 0.9)";
  div.textContent = `${data.user || "ŸÖÿ¨ŸáŸàŸÑ"}: ${data.text}`;
  return div;
}

// ÿ•ÿ∏Ÿáÿßÿ±/ÿ•ÿÆŸÅÿßÿ° ŸÜŸÖŸàÿ∞ÿ¨ ÿßŸÑÿ±ÿØ
function toggleReplyForm(commentId) {
  const form = document.getElementById(`reply-form-${commentId}`);
  if (!form) return;
  form.style.display = (form.style.display === "none") ? "block" : "none";
}

// ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿØ ÿ•ŸÑŸâ Firebase
function sendReply(paragraphId, parentId) {
  const textarea = document.getElementById(`reply-text-${parentId}`);
  if (!textarea) return;
  const text = textarea.value.trim();
  if (!text) return;
  if (!currentUser) {
    alert("ÿ≥ÿ¨ŸëŸÑ ÿØÿÆŸàŸÑŸÉ ŸÑÿ™ÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿßŸÑÿ±ÿØ");
    return;
  }

  db.collection("comments").add({
    paragraphId,
    parentId,
    text,
    user: currentUser.displayName || currentUser.email || "ŸÇÿßÿ±ÿ¶",
    timestamp: firebase.firestore.FieldValue.serverTimestamp()
  }).then(() => {
    textarea.value = "";
    toggleReplyForm(parentId);
    document.querySelector(".comment-box-overlay").remove();
    openCommentBox(paragraphId);
    updateCommentCount();
  }).catch(console.error);
}

// ÿ•ÿ∏Ÿáÿßÿ± ÿ£Ÿà ÿ•ÿÆŸÅÿßÿ° ÿ≤ÿ± "ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ≤ŸäÿØ" ÿ•ÿ∞ÿß ÿπÿØÿØ ÿßŸÑÿ±ÿØŸàÿØ ÿ£ŸÉÿ®ÿ± ŸÖŸÜ 4
function setupReplyToggle() {
  document.querySelectorAll(".replies").forEach(container => {
    const replies = container.querySelectorAll(".comment-box.reply");
    const showMoreContainer = container.querySelector(".show-more-container");

    replies.forEach((reply, index) => {  
      if (index >= 4) reply.style.display = "none";  
      else reply.style.display = "block";
    });  

    if (replies.length > 4) {  
      showMoreContainer.style.display = "block";  
    } else {  
      showMoreContainer.style.display = "none";  
    }
  });
}

// ÿπŸÜÿØ ÿßŸÑÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ÿ≤ÿ± "ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ≤ŸäÿØ"
function showMoreReplies(button) {
  const container = button.closest(".replies");
  if (!container) return;
  const hiddenReplies = Array.from(container.querySelectorAll(".comment-box.reply")).filter(c => c.style.display === "none");
  if (hiddenReplies.length > 0) {
    hiddenReplies.forEach(reply => reply.style.display = "block");
    button.textContent = "ÿ•ÿÆŸÅÿßÿ° ÿßŸÑÿ±ÿØŸàÿØ";
  } else {
    container.querySelectorAll(".comment-box.reply").forEach((reply, index) => {
      reply.style.display = (index >= 4) ? "none" : "block";
    });
    button.textContent = "ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ≤ŸäÿØ";
  }
}

// üìù ÿ•ÿ±ÿ≥ÿßŸÑ ÿ™ÿπŸÑŸäŸÇ
function sendComment(paragraphId) {
  const textarea = document.getElementById(`textarea-${paragraphId}`);
  if (!textarea) return;
  const text = textarea.value.trim();
  if (!text) return;
  if (!currentUser) {
    alert("ÿ≥ÿ¨ŸëŸÑ ÿØÿÆŸàŸÑŸÉ ŸÑÿ™ÿ™ŸÖŸÉŸÜ ŸÖŸÜ ÿßŸÑÿ™ÿπŸÑŸäŸÇ");
    return;
  }

  db.collection("comments").add({
    paragraphId,
    partId,
    text,
    user: currentUser.displayName || currentUser.email || "ŸÇÿßÿ±ÿ¶",
    timestamp: firebase.firestore.FieldValue.serverTimestamp()
  }).then(() => {
    textarea.value = "";
    // ÿ•ÿπÿßÿØÿ© ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ÿπŸÑŸäŸÇÿßÿ™ ŸÑÿπÿ±ÿ∂ ÿßŸÑÿ¨ÿØŸäÿØ
    document.querySelector(".comment-box-overlay").remove();
    openCommentBox(paragraphId);
    updateCommentCount();
  }).catch(console.error);
}

// ‚ù§Ô∏è ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿµŸàŸäÿ™ ŸàÿßŸÑŸÇÿ±ÿßÿ°ÿ©
const voteBtn = document.getElementById('voteBtn');
const voteCount = document.getElementById('voteCount');
const readCount = document.getElementById('readCount');
const commentCount = document.getElementById('commentCount');
const heartExplosion = document.getElementById('heartExplosion');

const voteRef = db.collection("votes").doc(partId);
const readsRef = db.collection("reads");
const commentsRef = db.collection("comments");

function updateVoteCount() {
  voteRef.get().then(doc => {
    voteCount.textContent = `${doc.exists ? doc.data().count || 0 : 0} ÿ™ÿµŸàŸäÿ™`;
  });
}

function updateReadCount() {
  readsRef.where("partId", "==", partId).get().then(snapshot => {
    readCount.textContent = `${snapshot.size} ŸÇÿ±ÿßÿ°ÿ©`;
  });
}

function updateCommentCount() {
  commentsRef.where("partId", "==", partId).get().then(snapshot => {
    commentCount.textContent = `${snapshot.size} ÿ™ÿπŸÑŸäŸÇ`;
  });
}

// üíñ ÿ™ÿ£ÿ´Ÿäÿ± ÿßŸÑŸÇŸÑŸàÿ®
function triggerHearts() {
  for (let i = 0; i < 25; i++) {
    const heart = document.createElement('div');
    heart.textContent = 'üíñ';
    heart.style.cssText = `
      position: absolute;
      top: ${Math.random() * 100}%;
      left: ${Math.random() * 100}%;
      font-size: ${12 + Math.random() * 20}px;
      opacity: 1;
      animation: floatUp 1.8s ease-out forwards;
      pointer-events: none;
      user-select: none;
    `;
    heartExplosion.appendChild(heart);
    setTimeout(() => heart.remove(), 2000);
  }
}

// üí´ ÿ•ÿ∂ÿßŸÅÿ© ÿ™ÿ£ÿ´Ÿäÿ± ÿßŸÑÿ≠ÿ±ŸÉÿ©
const style = document.createElement('style');
style.textContent = `
  @keyframes floatUp {
    0% { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(-120px); opacity: 0; }
  }
`;
document.head.appendChild(style);

// üöÄ ÿ™ŸÜŸÅŸäÿ∞ ÿπŸÜÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸÅÿ≠ÿ©
document.addEventListener("DOMContentLoaded", () => {
  renderParagraphs(partId);

  // ÿ™ÿ≥ÿ¨ŸäŸÑ ŸÇÿ±ÿßÿ°ÿ© (ŸäŸÖŸÉŸÜ ÿ£ŸÜ ÿ™ÿ≤ŸäÿØ ÿπÿØÿØ ŸÖÿ±ÿßÿ™ ÿßŸÑŸÇÿ±ÿßÿ°ÿ©)
  readsRef.add({
    partId,
    timestamp: firebase.firestore.FieldValue.serverTimestamp()
  }).catch(console.error);

  updateVoteCount();
  updateReadCount();
  updateCommentCount();

  if (voteBtn) {
    voteBtn.onclick = () => {
      if (!currentUser) return alert("ÿ≥ÿ¨ŸëŸÑ ÿØÿÆŸàŸÑŸÉ ŸÑÿ™ÿµŸàŸëÿ™ üåπ");

      voteRef.update({ count: firebase.firestore.FieldValue.increment(1) })  
        .then(() => {  
          updateVoteCount();  
          triggerHearts();  
        }).catch(() => {  
          voteRef.set({ count: 1 });  
          updateVoteCount();  
          triggerHearts();  
        });
    };
  }
});
</script>
  </body>
</html>
