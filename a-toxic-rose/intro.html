<!DOCTYPE html>      
<html lang="ar" dir="rtl">      
<head>      
  <meta charset="UTF-8" />      
  <meta name="viewport" content="width=device-width, initial-scale=1" />      
  <title>Ø¨Ø§Ø±Øª - Toxic Rose</title>      
  <link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">      
  <style>      
    :root {      
      --space-bg-dark: radial-gradient(ellipse at bottom, #020611, #05030c, #000);      
      --star-color: rgba(0, 191, 255, 0.08);      
      --text-primary: #cfefff;      
      --text-secondary: #7dd3fc;      
      --text-accent: #38bdf8;      
      --link-color: #60a5fa;      
      --link-hover-color: #93c5fd;      
      --button-bg: #0f172a;      
      --button-hover-bg: #1e293b;      
      --glow-color: #3b82f6;      
    }      
      
    html { scroll-behavior: smooth; }      
    body {      
      margin: 0;      
      font-family: 'Amiri', serif;      
      background: radial-gradient(ellipse at bottom, #020611 0%, #05030c 35%, #000000 100%);      
      background-size: 400% 400%;      
      animation: spaceWave 60s ease infinite;      
      color: var(--text-primary);      
      overflow-x: hidden;      
      min-height: 100vh;      
      position: relative;      
    }      
      
    body::before {      
      content: "";      
      position: fixed;      
      top: 0; left: 0; right: 0; bottom: 0;      
      pointer-events: none;      
      z-index: 0;      
      background-image:      
        radial-gradient(circle at 20% 30%, rgba(255, 180, 255, 0.3) 2px, transparent 3px),      
        radial-gradient(circle at 50% 60%, rgba(255, 200, 255, 0.2) 1.5px, transparent 2px),      
        radial-gradient(circle at 80% 40%, rgba(255, 160, 255, 0.25) 2.5px, transparent 3px),      
        radial-gradient(circle at 70% 80%, rgba(255, 220, 255, 0.18) 1.8px, transparent 2px);      
      background-size: 250px 250px;      
      animation: starsGlitter 120s linear infinite;      
    }      
      
    @keyframes spaceWave {      
      0% { background-position: 0% 50%; }      
      50% { background-position: 100% 50%; }      
      100% { background-position: 0% 50%; }      
    }      
      
    @keyframes starsGlitter {      
      0% { background-position: 0 0, 0 0, 0 0, 0 0; }      
      100% { background-position: -2000px 2000px, 1500px -1000px, -1600px 1600px, 1200px -900px; }      
    }      
      
    header {      
      width: 100%;      
      background: rgba(2, 6, 23, 0.9);      
      border-bottom: 2px solid var(--glow-color);      
      box-shadow: 0 0 15px var(--glow-color);      
      backdrop-filter: blur(6px);      
      text-align: center;      
      position: relative;      
      z-index: 10000;      
      padding: 0;      
    }      
      
    .logo-wrapper img {      
      width: 100%;      
      height: auto;      
      display: block;      
      object-fit: cover;      
      max-height: 240px;      
    }      
      
    .main-nav {      
      display: flex;      
      overflow-x: auto;      
      white-space: nowrap;      
      padding: 8px 10px;      
      background: rgba(2, 6, 23, 0.9);      
      border-top: 1px solid var(--glow-color);      
      border-bottom: 2px solid var(--glow-color);      
      box-shadow: 0 0 10px var(--glow-color);      
    }      
      
    .main-nav a {      
      display: inline-block;      
      color: var(--link-color);      
      padding: 8px 14px;      
      text-decoration: none;      
      font-weight: bold;      
      font-size: 15px;      
      margin-right: 10px;      
      white-space: nowrap;      
      transition: color 0.3s, text-shadow 0.3s;      
      flex-shrink: 0;      
    }      
      
    .main-nav a:hover {      
      color: var(--link-hover-color);      
      text-shadow: 0 0 5px var(--link-hover-color), 0 0 15px var(--link-hover-color);      
      text-decoration: underline;      
    }      
      
    .container {      
      max-width: 760px;      
      margin: 40px auto;      
      background: rgba(2, 6, 23, 0.6);      
      border-radius: 15px;      
      padding: 28px 22px 80px;      
      box-shadow: 0 0 25px var(--glow-color);      
      position: relative;      
      z-index: 10;  
      overflow: visible;  
    }      
      
    .story-title {      
      text-align: center;      
      font-size: 1.8rem;      
      color: var(--text-secondary);      
      margin-bottom: 30px;      
      text-shadow: 0 0 12px var(--text-secondary);      
    }      
    
    /* ØªØ¹Ù„ÙŠÙ‚Ø§Øª */    
    .comment-box {    
      background: rgba(15, 23, 42, 0.9);    
      border: 1.5px solid #38bdf8;    
      border-radius: 12px;    
      padding: 12px 14px 10px;    
      margin-top: 8px;    
      box-shadow: 0 0 10px #38bdf8aa;    
      font-family: 'Amiri', serif;    
    }    
    .comments {    
      max-height: 150px;    
      overflow-y: auto;    
      margin-bottom: 12px;    
      border-bottom: 1px solid #334155;    
      padding-bottom: 8px;    
      color: #a0cfff;    
    }    
    .comments div {    
      margin-bottom: 10px;    
      word-break: break-word;    
    }    
    .comments b {    
      color: #7dd3fc;    
    }    
    textarea {    
      width: 100%;    
      font-family: 'Amiri', serif;    
      font-size: 1rem;    
      border-radius: 8px;    
      border: 1px solid #38bdf8;    
      background: #020611;    
      color: #cfefff;    
      padding: 8px 10px;    
      resize: vertical;    
      min-height: 60px;    
      transition: border-color 0.3s;    
    }    
    textarea:focus {    
      outline: none;    
      border-color: #7dd3fc;    
    }    
    button.send-comment {    
      background: #0f172a;    
      color: #7dd3fc;    
      border: none;    
      padding: 10px 16px;    
      border-radius: 10px;    
      cursor: pointer;    
      font-weight: bold;    
      font-family: 'Amiri', serif;    
      transition: background-color 0.3s, color 0.3s;    
    }    
    button.send-comment:disabled {    
      background: #334155;    
      color: #7dd3fcaa;    
      cursor: not-allowed;    
    }   
  
    #authButtons button {  
  background: var(--button-bg);  
  color: var(--text-accent);  
  border: none;  
  padding: 10px 18px;  
  border-radius: 10px;  
  font-weight: bold;  
  font-family: 'Amiri', serif;  
  cursor: pointer;  
  margin: 6px;  
  transition: background 0.3s;  
}  
#authButtons button:hover {  
  background: var(--button-hover-bg);  
}  
  
#userInfo {  
  margin-top: 10px;  
  font-size: 0.95rem;  
  color: var(--text-secondary);  
  background: rgba(255,255,255,0.05);  
  padding: 8px 12px;  
  border-radius: 8px;  
  display: inline-block;  
}  
    
    /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„ */    
    .nav-buttons {    
      display: flex;    
      justify-content: space-between;    
      margin-top: 40px;    
    }    
    .nav-buttons a {  
  background: linear-gradient(135deg, #0f172a, #1e293b);  
  color: var(--text-accent);  
  padding: 10px 18px;  
  border-radius: 10px;  
  text-decoration: none;  
  font-weight: bold;  
  transition: background 0.3s;  
  border: 1px solid var(--glow-color);  
  box-shadow: 0 0 12px #38bdf855;  
}  
.nav-buttons a:hover {  
  background: var(--button-hover-bg);  
}   
  
    /* Ø³Ø­Ø§Ø¨Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª ØªØ¸Ù‡Ø± Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± ÙˆØªØºØ·ÙŠ Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ø´Ø§Ø´Ø© */  
.comment-box-overlay {  
  position: fixed;  
  top: 80px;  
  left: 0;  
  width: 320px;  
  max-height: 85vh;  
  overflow-y: auto;  
  background: rgba(15, 23, 42, 0.95);  
  border: 2px solid #38bdf8;  
  border-radius: 0 12px 12px 0;  
  padding: 16px;  
  box-shadow: 6px 0 20px #38bdf8aa;  
  z-index: 9999;  
  display: none;  
  transition: transform 0.3s ease;  
}  
  
/* Ø²Ø± Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø³Ø­Ø§Ø¨Ø© */  
.comment-box-overlay .close-btn {  
  background: transparent;  
  border: none;  
  color: #7dd3fc;  
  font-size: 22px;  
  font-weight: bold;  
  cursor: pointer;  
  position: absolute;  
  top: 10px;  
  right: 12px;  
    }  
    @media (max-width: 600px) {  
  .comment-box-overlay {  
    width: 100%;  
    border-radius: 0;  
    left: 0;  
  }  
  }  
  
    #voteBar {  
  position: fixed;  
  bottom: 15px;  
  right: 20px;  
  background: rgba(15, 23, 42, 0.9);  
  padding: 10px 14px;  
  border-radius: 16px;  
  box-shadow: 0 0 15px #38bdf8aa;  
  z-index: 10000;  
  display: flex;  
  align-items: center;  
  gap: 12px;  
}  
  
#voteBtn {  
  font-size: 22px;  
  background: none;  
  border: none;  
  color: #f87171;  
  cursor: pointer;  
  transition: transform 0.3s;  
}  
  
#voteBtn:hover {  
  transform: scale(1.2);  
}  
  
#voteCount {  
  font-family: 'Amiri', serif;  
  font-size: 0.95rem;  
  color: #7dd3fc;  
}  
  
#heartExplosion {  
  position: fixed;  
  top: 0; left: 0; right: 0; bottom: 0;  
  pointer-events: none;  
  z-index: 9999;  
      }  
    .comment-box.reply {
  font-family: 'Amiri', serif;
  background-color: rgba(15, 23, 42, 0.85);
  border-left: 3px solid #7dd3fc;
  margin-top: 6px;
  color: #a0cfff;
  padding: 6px 12px;
  border-radius: 8px;
}
.reply-btn {
  background: none;
  border: none;
  color: #38bdf8;
  cursor: pointer;
  font-size: 0.85rem;
  margin-top: 4px;
}
.reply-btn:hover {
  text-decoration: underline;
}
.send-comment {
  background: #0f172a;
  color: #7dd3fc;
  border: none;
  padding: 6px 12px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
  font-family: 'Amiri', serif;
  transition: background-color 0.3s, color 0.3s;
}
.send-comment:hover {
  background-color: #1e293b;
} 
      
  </style>      
</head>      
      
<body>  
  <header>      
    <div class="logo-wrapper">      
      <img src="https://i.ibb.co/jkcmR2L0/Picsart-25-06-28-13-01-01-547.jpg" alt="Ø´Ø¹Ø§Ø± Ø¢Ø«ÙŠØ±ÙŠØ§Øª Ø§Ù„Ø¹Ù†Ù‚Ø§Ø¡" />      
    </div>      
  </header>      
      
  <nav class="main-nav">      
    <a href="index.html">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>      
    <a href="https://www.instagram.com/carlasilvator" target="_blank">ğŸ“¸ Ø£Ù†Ø³ØªØºØ±Ø§Ù…ÙŠ</a>      
    <a href="follow-me.html">ğŸ§¬ Ø§Ø´ØªØ±Ùƒ</a>      
  </nav>      
      
  <div class="container">      
    <h2 class="story-title">Ø¨ÙŠÙ„Ø§Ø¯ÙˆÙ†Ø§ Ø§Ù„Ø³Ø§Ù…Ø©</h2>      
      
    <div id="authButtons">      
      <button id="loginBtn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù€ Google</button>      
      <button id="logoutBtn" style="display:none;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>      
      <div id="userInfo"></div>      
    </div>      
      
    <div id="raw-content" style="display:none;">      
          
~Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©~    
    
Â«ÙƒØ§Ù†Øª Ù…Ø«Ù„ Ø§Ù„Ø¨ÙŠÙ„Ø§Ø¯ÙˆÙ†Ø§ ØªØ²Ù‡Ø± ÙÙŠ Ø§Ù„Ø¸Ù„Ø§Ù… Ù„ØªØºØ±ÙŠ Ø§Ù„Ù†Ø§Ø¸Ø±ÙŠÙ† Ø¨ÙØªÙ†Ø© Ø¬Ù…Ø§Ù„Ù‡Ø§ Ø§Ù„Ø³Ø§Ø­Ø± Ùˆ ØªØ®ÙÙŠ Ø¨ÙŠÙ† Ø·ÙŠØ§ØªÙ‡Ø§ Ø³Ù…Ù‡Ø§ Ø§Ù„Ù‚Ø§ØªÙ„ Ù…ÙˆÙ‚Ø¹Ø© Ø§Ù„ØªØ§Ø¦Ù‡ÙŠÙ† Ø¹Ù„Ù‰ Ø£Ø±Ø¶ Ø§Ù„Ø¬Ù†ÙˆÙ† ÙÙŠ ÙØ®ÙˆØ®Ù‡Ø§ Ù…Ù†ØªØ¸Ø±Ø© ÙˆÙ‚Øª Ø£Ù‚Ø§Ù…Ø© Ø§Ù„Ø­Ø¯Ø§Ø¯ Ø¹Ù„Ù‰ Ø£Ø±ÙˆØ§Ø­Ù‡Ù… Ø§Ù„Ù…Ø¹Ø°Ø¨Ø© Ø¨Ø³Ù…ÙˆÙ…Ù‡Ø§Â»    
    
    
    
Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø£Ø±Ø¶ Ø§Ù„Ø¬Ù†ÙˆÙ†    
ÙŠØ§ Ù…Ù† Ù‚Ø±Ø±Øª Ø¨Ø­Ù…Ø§Ù‚Ø© Ù„Ø°ÙŠØ°Ø© Ø£Ù† ØªÙØªØ­ Ø±ÙˆØ§ÙŠØªÙŠ    
Ø­ÙŠØ« Ø§Ù„Ù…Ù†Ø·Ù‚ ÙŠØ°Ø¨Ø­ Ùˆ Ø§Ù„Ø¹ÙÙ‚Ù„Ø§Ø¡ ÙŠØ¤ÙƒÙ„ÙˆÙ† Ø§ÙˆÙ„Ø§Ù‹..    
    
    
    
    
    
Ø£Ù† ÙƒÙ†Øª Ù‚Ø§Ø±Ø¦ Ø¨ØªÙÙƒÙŠØ± Ø£Ø¬Ø±Ø§Ù…ÙŠ Ùˆ Ø³Ø§ÙŠÙƒÙˆ ÙÙ€ Ø±Ø­ ØªÙƒÙˆÙ† Ø·Ø¨Ù‚ Ø§Ù„ØªØ­Ù„ÙŠØ© Ø¹Ù„Ù‰ Ù…Ø§Ø¦Ø¯ØªÙŠ Ù„Ø£Ù† Ø¹Ù‚Ù„Ùƒ Ø³ÙŠÙƒÙˆÙ† Ø§Ù„Ø£Ù„Ø° Ø·Ø¹Ù…Ø§Ù‹     
    
    
Ø´Ø¯ÙˆØ§ Ø§Ù„Ø£Ø­Ø²Ù…Ø©     
Ø£Ùˆ Ù„Ø§ ØªÙØ¹Ù„ÙˆØ§     
Ù„ÙƒÙ† Ù„Ø§ ØªÙ„ÙˆÙ…ÙˆÙ†ÙŠ Ø¨Ø¹Ø¯ Ø³Ù‚ÙˆØ·ÙƒÙ…     
    
    
Ù„Ø§ ØªØ«Ù‚ Ø¨Ø£Ø­Ø¯ ÙÙƒÙ„ Ø´Ø®ØµÙŠØ© Ù‡Ù†Ø§ Ù‡ÙŠ Ø´ÙŠØ·Ø§Ù† Ù…ØªÙ†ÙƒØ±..    
Ù„Ø§ Ø¨Ø·Ù„ ÙŠÙ†Ù‚Ø°    
Ùˆ Ù„Ø§ Ø¨Ø·Ù„Ø© ØªØ¨ÙƒÙŠ     
Ù„Ø§ Ø¶Ø­ÙŠØ© Ø§Ù„ÙƒÙ„ Ù…Ø°Ù†Ø¨    
Ø­ØªÙ‰ Ø£Ù†Øª Ù„Ø£Ù†Ùƒ Ø³ØªÙ‚Ø±Ø£ ÙƒÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø´Ø±     
Ù„Ø£Ù†Ùƒ Ø³ØªØªØ£Ø«Ø± Ø¨Ù‡     
Ø£Ø¹Ù„Ù… Ù‡Ø°Ø§ Ø¬ÙŠØ¯Ø§Ù‹ ÙØ£Ù†Ø§ Ø§Ù„Ù…Ø®Ø±Ø¬Ø© ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ³ÙŠØ± Ø­Ø³Ø¨ Ø±ØºØ¨ØªÙŠ ÙˆØ­Ø¯ÙŠ    
    
    
Ø¯Ø¹Ù†ÙŠ Ø£Ø¹Ø·ÙŠÙƒ Ø¯ÙˆØ±Ùƒ ÙŠØ§Ø¹Ø²ÙŠØ²ÙŠ Ø£Ù†Øª Ø§Ù„Ø´Ø§Ù‡Ø¯ØŸ..    
    
Ù„Ø§ Ø£Ø³ÙØ© Ø®Ù„ÙŠÙ†ÙŠ Ø£ØµØ­Ø­ Ø£Ù†Øª Ø´Ø§Ù‡Ø¯ Ùˆ Ù…Ø´Ø§Ø±Ùƒ Ø±ØºÙ…Ø§Ù‹ Ø¹Ù†ÙƒÂ  ÙÙŠ Ø­Ø±Ø¨ Ù„Ø§ Ù‚Ø§Ù†ÙˆÙ† ÙŠØ­ÙƒÙ…Ù‡Ø§ Ø¨ÙŠÙ† Ù‡Ø°Ù‡ Ø§Ù„Ø´ÙŠØ§Ø·ÙŠÙ†ØŒ Ø­Ø±Ø¨ Ø§Ù„Ø¹Ø´Ù‚ Ùˆ Ø§Ù„Ø³Ù„Ø·Ø© Ø¬Ù†ÙˆÙ† Ø§Ù„Ù‡ÙˆØ³ Ùˆ Ø§Ù„Ø®ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø¸Ù…Ù‰..     
    
    
    
    
Ùˆ ÙŠØ§ Ø£Ø±ÙˆØ§Ø­ÙŠ Ø§Ù„Ø´ÙÙ‚ÙŠØ© Ø£Ø­Ø°Ø±ÙƒÙ… Ù…Ù† Ø²Ù‡Ø±ØªÙŠ Ø§Ù„Ø³Ø§Ù…Ø© Ù„Ø§ ØªØ¯Ø¹ÙˆÙ‡Ø§ ØªØ³Ø­Ø±ÙƒÙ… Ùˆ ØªÙ‚ÙŠÙ… Ø§Ù„Ø­Ø¯Ø§Ø¯ Ø¹Ù„Ù‰ Ø£Ø±ÙˆØ§Ø­ÙƒÙ… Ø§Ù„Ù…ÙØªÙˆÙ†Ø©    
Ù„Ø§ ØªÙ‚ØªØ±Ø¨ÙˆØ§    
Ù„Ø§ ØªÙ†Ø®Ø¯Ø¹ÙˆØ§     
Ùˆ Ù„Ø§ ØªÙ‚Ø¹ÙˆØ§ Ø¨Ø­Ø¨Ù‡Ø§    
Ø¥Ù„Ø§ Ø£Ù† Ø±ØºØ¨ØªÙ… Ø¨Ø£Ù† ØªØ¯ÙÙ†ÙˆØ§ Ø£Ø­ÙŠØ§Ø¡ Ù‡Ø°Ø§ ÙŠØ¹ÙˆØ¯ Ù„ÙƒÙ…...     
    
    
    
    
Ø­ØªÙ‰ Ø£Ù† Ù„Ù… ØªØ±ØºØ¨ Ø¨Ø§Ù„Ø³Ù‚ÙˆØ· ÙŠØ¤Ø³ÙÙ†ÙŠ    
Ø£Ù†Ùƒ Ø³ØªÙ‚Ø¹ Ø¨Ø§Ù„ØªØ£ÙƒÙŠØ¯..     
Ø§Ù„Ø¬Ù…ÙŠØ¹ ÙŠÙ‚Ø¹.     
Ø¨ÙŠÙ†Ù…Ø§ Ø£Ù†Ø§ Ø£Ø´Ø§Ù‡Ø¯ÙƒÙ… Ø¨Ø£Ø¨ØªØ³Ø§Ù…Ø©    
    
Ùˆ ÙƒÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø³Ù‚ÙˆØ· ÙŠØ¬Ø¹Ù„Ù†ÙŠ Ø§Ø³Ø£Ù„ Ù‡Ù„ Ø§Ù„Ø¨Ø·Ù„Ø© ØªØ³ØªØ­Ù‚ Ø§Ù† ØªÙ‚Ø¹ÙˆØ§ Ø¨Ø­Ø¨Ù‡Ø§ Ùˆ ØªØ¯ÙÙ†ÙˆØ§ Ø£Ø­ÙŠØ§Ø¡ Ù„Ø£Ø¬Ù„Ù‡Ø§ØŸ    
    
Ø£Ù… Ø£Ù†ÙƒÙ… Ø³ØªÙƒØ±Ù‡ÙˆÙ†Ù‡Ø§ ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ùˆ ØªÙ†Ø¯Ù…ÙˆÙ†ØŸ    
    
Ø¯Ø¹ÙˆÙ†ÙŠ Ø£Ø¹Ø±ÙÙƒÙ… Ø¹Ù„Ù‰ Ù†ÙØ³ÙŠ Ø£Ù†Ø§ Ø¢Ø«ÙŠØ±.. Ø¹Ù†Ù‚Ø§Ø¡ Ø§Ù„Ù…ÙˆØª Ù„Ø³Øª ÙƒØ§ØªØ¨Ø© Ø£Ù†Ø§ Ø§Ù„Ù…Ø®Ø±Ø¬Ø© Ø§Ù„Ø´Ø±ÙŠØ±Ø© Ø§Ù„ØªÙŠ ØµÙ†Ø¹Øª Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¬Ø²Ø±Ø© Ø§Ù„Ø¹Ø§Ø·ÙÙŠØ©    
    
Ùˆ ÙƒÙ…Ø§ ÙŠÙ‚ÙˆÙ„ÙˆÙ† Ø£Ù†Ø§ Ù„Ø³Øª ÙÙ†Ø§Ù†Ø© Ø§Ù†Ø§ Ø§Ù„ÙÙ† Ø§Ù„Ø³ÙˆØ¯Ø§ÙˆÙŠ    
    
Ùˆ Ù‡Ø°Ù‡ Ù‡ÙŠ Ø²Ù‡Ø±ØªÙŠ Ø§Ù„Ø³Ø§Ù…Ø© Ø±ÙˆØ§ÙŠØªÙŠ Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù…Ù† Ø³Ù„Ø³Ù„Ø©     
_Ø£Ø¨ØªØ³Ù… Ø£ÙŠÙ‡Ø§ Ø§Ù„Ø´ÙŠØ·Ø§Ù†..     
    
Ø§Ù„Ø´ÙŠØ·Ø§Ù† Ø³ÙŠØ¨ØªØ³Ù… ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ù„Ø£Ù†ØªØµØ§Ø±Ù‡ Ùˆ Ù‡Ø°Ù‡ Ø§Ù„ÙƒØ§ØªØ¨Ø© Ø³ØªØµÙÙ‚ Ù„Ù‡ Ø¨Ø­Ø±Ø§Ø±Ø©    
    
    
    
    
    
    
    
    
Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø±Ø­Ù„Ø© Ø§Ù„Ù‡Ù„Ø§Ùƒ:    
    
â€¢Ø§Ù„Ø±ÙˆØ§ÙŠØ© Ù‚Ø¯ Ù„Ø§ ØªÙ†Ø§Ø³Ø¨ Ø§Ù„Ø¨Ø¹Ø¶ Ù„Ø£Ø­ØªÙˆØ§Ø¦Ù‡Ø§ Ø¹Ù„Ù‰ ØªÙØ§ØµÙŠÙ„ Ø¯Ù…ÙˆÙŠØ© Ù…ÙØµÙ„Ø© Ùˆ Ù…Ø´Ø§Ù‡Ø¯ Ø­Ø§Ø¯Ø©    
    
â€¢Ø§Ù„ØªØµÙ†ÙŠÙ: Ø£ÙƒØ´Ù†_ØºÙ…ÙˆØ¶_ Ù†ÙØ³ÙŠ_Ø®ÙŠØ§Ù„ Ø¹Ù„Ù…ÙŠ _Ø¯Ù…ÙˆÙŠ _Dark romance Ø¯Ø§Ø±Ùƒ Ø±ÙˆÙ…Ø§Ù†Ø³    
    
Ù…Ù† Ø£Ø¹Ø¯Ø§Ø¡ Ø¥Ù„Ù‰ Ø£Ø­Ø¨Ø§Ø¡ âŸµ Ø«Ù… Ù…Ù† Ø£Ø­Ø¨Ø§Ø¡ Ø¥Ù„Ù‰ Ø£Ø¹Ø¯Ø§Ø¡     
    
Â     
â€¢Ø§Ù„ØªÙ†Ø²ÙŠÙ„ Ø­Ø³Ø¨ Ø§Ù„ØªÙØ§Ø¹Ù„ Ø±ÙƒØ²ÙˆØ§ Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ù†Ù‚Ø·Ø©    
    
    
â€¢Ø§Ù† ÙƒÙ†Øª ØªØ¨Ø­Ø« Ø¹Ù† Ø±ÙˆØ§ÙŠØ© Ø¨Ø¹ÙˆØ§Ù„Ù… ÙˆØ±Ø¯ÙŠØ© Ù„Ø·ÙŠÙØ© ÙÙ‚Ø¯ Ø£Ø®Ø·Ø£Øª Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙƒÙ„ Ù…Ø§ ÙŠÙˆØ¬Ø¯ Ù‡Ù†Ø§ Ù‡Ùˆ ÙˆØ±Ø¯ Ø³Ø§Ù… Ø¨Ø£Ù„ÙˆØ§Ù† Ø²Ø§Ù‡ÙŠØ© Ù„ÙƒÙ†Ù‡ Ù‚Ø§ØªÙ„     
Ù„Ø°Ø§ Ø£Ø®Ø±Ø¬ Ø£Ù† Ù„Ù… ØªÙƒÙ† Ù…Ù† Ù…Ø­Ø¨ÙŠ Ø§Ù„Ù…ÙˆØª     
Ø¹Ù„Ù‰ Ø£ÙŠØ¯ÙŠ ÙƒØ§ØªØ¨Ø© Ù…Ù‡ÙˆÙˆØ³Ø© Ø¨Ø£ÙƒÙ„ Ø¹Ù‚ÙˆÙ„ Ø§Ù„Ù‚Ø±Ø§Ø¡    
    
    
    
â€¢Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø¬Ù†Ø³ÙŠØ© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© Ø£Ù†Ø§ Ø£Ø±Ù‚Ù‰ Ø¨ÙƒØ«ÙŠØ± Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…ØªØ¯Ù†ÙŠ     
    
â€¢Ø§Ù„Ø£Ù†ØªÙ‚Ø§Ø¯ Ù…Ù‚Ø¨ÙˆÙ„ Ù„ÙƒÙ† Ø¨Ø£Ø­ØªØ±Ø§Ù… Ù‡Ø°Ù‡ Ø±ÙˆØ§ÙŠØªÙŠ Ù…Ùˆ Ù…Ø·Ø¹Ù… Ø·Ù„Ø¨Ø§Øª ÙŠÙ„Ø¨ÙŠ Ø±ØºØ¨Ø§ØªÙƒ Ù„Ø°Ø§ Ù„Ø§ ØªÙ„Ø¨Ø³ Ù‚Ù†Ø§Ø¹ Ø§Ù„Ù…Ù‡Ø±Ø¬ Ø§Ù„Ù…ØªÙ†ÙƒØ± Ø¨Ø«ÙˆØ¨ Ø§Ù„Ù†Ø§Ù‚Ø¯ Ø£ØªÙÙ‚Ù†Ø§ØŸ    
    
â€¢Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„ÙŠ Ùˆ Ø§Ù„Ø£Ù‚ØªØ¨Ø§Ø³ Ø¯ÙˆÙ† Ø£Ø°Ù†ÙŠ Ù‡Ùˆ ÙØ¹Ù„ ØºØ¨ÙŠ Ø¬Ø¯Ø§Ù‹ Ù„Ø£Ù†Ù†ÙŠ Ø³Ø£Ù…Ø³Ø­ Ø¨ÙƒØ±Ø§Ù…ØªÙƒ Ø§Ù„Ø£Ø±Ø§Ø¶ÙŠ Ùˆ Ø³Ø£Ø¨Ø¯Ø¡ Ø¨Ù€ ÙŠØ§ Ø¹Ø²ÙŠØ²ÙŠ Ùˆ Ø£Ø®ØªÙ…Ù‡Ø§ Ø¨Ù‚Ø¨Ù„Ø§Øª Ø­Ø§Ø±Ø© Ø¹Ù„Ù‰ Ø¬Ø«Ø© ÙƒØ±Ø§Ù…ØªÙƒ Ø§Ù„Ù‚Ø°Ø±Ø©    
    
    
Ú¤ÙˆÙ„Ø§ ÙŠØ§ Ø£Ø±ÙˆØ§Ø­ Ø§Ù„Ø´ÙÙ‚ Ùˆ Ù„Ø§ ØªÙ†Ø³ÙˆØ§ Ø£Ù†Ø§ Ø­Ø°Ø±ØªÙƒÙ…    
Ø£Ù† ÙƒÙ†Øª Ø¹Ø§Ù‚Ù„ ÙØ£Ù‡Ø±Ø¨     
Ùˆ Ø£Ù† Ø¨Ù‚ÙŠØª ÙØ£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ³Ø±Ù†ÙŠ Ø§Ù† Ø£Ø¨Ø¯Ø£ Ø¨Ø§Ù„ØªØ®Ø·ÙŠØ· Ù„Ø±Ø³Ù… Ø­Ø¨ÙƒØ© Ø³ØªØ·Ø¨Ø® Ø¹Ù‚Ù„Ùƒ Ù‚Ø¨Ù„ ÙˆØ¶Ø¹Ù‡ Ù‡Ù„Ù‰ Ù…Ø§Ø¦Ø¯ØªÙŠ    
    
Ø¨Ø¯Ø£Øª ÙÙŠ: 27 Ø£ÙƒØªÙˆØ¨Ø± /Ø¹Ø§Ù… 2024    
    
ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£Ù†ØªÙ‡Ø§Ø¡: Ø­ÙŠÙ†Ù…Ø§ ØªØµØ¨Ø­ Ù…Ù‡ÙˆÙˆØ³Ø§Ù‹    
Ø¨Ø§Ù„Ù„Ø¹Ù†Ø§Øª Ø§Ù„ØªÙŠ Ø£ÙƒØªØ¨Ù‡Ø§     
Ø§Ù„Ø¶Ø­ÙŠØ© Ø£Ù†Øª     
Ø§Ù„Ù…Ø°Ù†Ø¨Ø© Ø§Ù†Ø§ Ø§Ù„ØªÙŠ ØªØ¹Ø´Ù‚ Ø£ÙƒÙ„ Ø¹Ù‚ÙˆÙ„ Ø§Ù„Ù‚Ø±Ø§Ø¡    
    
    </div>      
      
    <div id="rendered-content"></div>      
      
       <div class="nav-buttons">   
      <a href="#" id="prevBtn">â¬…ï¸ Ø§Ù„Ø¨Ø§Ø±Øª Ø§Ù„Ø³Ø§Ø¨Ù‚</a>      
      <a href="#" id="nextBtn">Ø§Ù„Ø¨Ø§Ø±Øª Ø§Ù„ØªØ§Ù„ÙŠ â¡ï¸</a>      
    </div>      
  </div>  

  <footer style="text-align:center; padding:15px 0; color: #7dd3fc; font-family: 'Amiri', serif; font-size: 0.9rem;">
  Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù†Ø´Ø± Ù…Ø­ÙÙˆØ¸Ø©ØŒ ÙˆÙƒÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… ØºÙŠØ± Ù…Ø±Ø®Øµ ÙŠØ¹Ø±Ø¶ ØµØ§Ø­Ø¨Ù‡ Ù„Ù„Ù…Ø³Ø§Ø¡Ù„Ø© Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© â€” Â© 2025
</footer>

<div id="actionBar" style="
  position: fixed;     
  bottom: 0;     
  width: 100%;     
  background: #0f172a;     
  color: #7dd3fc;     
  font-family: 'Amiri', serif;     
  display: flex;     
  justify-content: center;     
  gap: 30px;     
  padding: 10px 0;     
  border-top: 1px solid #38bdf8;     
  z-index: 9999;">
  <button id="voteBtn" style="background:none; border:none; color:#e0245e; font-size: 24px; cursor: pointer;">â¤ï¸</button>    
  <span id="voteCount">0 ØªØµÙˆÙŠØª</span>    
  <span id="readCount">0 Ù‚Ø±Ø§Ø¡Ø©</span>    
  <span id="commentCount">0 ØªØ¹Ù„ÙŠÙ‚</span>    
</div>

<!-- Ù‚Ù„ÙˆØ¨ Ø§Ù„ØªØµÙˆÙŠØª Ø§Ù„Ù…ØªÙØ¬Ø±Ø© -->
<div id="heartExplosion" style="position: fixed; bottom: 60px; left: 0; width: 100%; height: 0; pointer-events: none; z-index: 9998;"></div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

<script>
// ğŸ”¥ Ø¥Ø¹Ø¯Ø§Ø¯ Firebase  
const firebaseConfig = {  
  apiKey: "AIzaSyBtTc7yWNfNkG0oVSbpq0V9A6DHTgZoGBM",  
  authDomain: "works-rawan.firebaseapp.com",  
  projectId: "works-rawan",  
  storageBucket: "works-rawan.appspot.com",  
  messagingSenderId: "986254083746",  
  appId: "1:986254083746:web:17f7db0389c94473f0b9fb"  
};  

firebase.initializeApp(firebaseConfig);  
const auth = firebase.auth();  
const db = firebase.firestore();  
  
let currentUser = null;  
const loginBtn = document.getElementById("loginBtn");
const logoutBtn = document.getElementById("logoutBtn");
const userInfo = document.getElementById("userInfo");

auth.onAuthStateChanged(user => {  
  currentUser = user;  
  if (user) {  
    if (loginBtn) loginBtn.style.display = "none";  
    if (logoutBtn) logoutBtn.style.display = "inline-block";  
    if (userInfo) userInfo.textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ${user.displayName || user.email}`;  
  } else {  
    if (loginBtn) loginBtn.style.display = "inline-block";  
    if (logoutBtn) logoutBtn.style.display = "none";  
    if (userInfo) userInfo.textContent = "";  
  }  
});  
  
if (loginBtn) loginBtn.onclick = () => {  
  const provider = new firebase.auth.GoogleAuthProvider();  
  auth.signInWithPopup(provider).catch(console.error);  
};  

if (logoutBtn) logoutBtn.onclick = () => auth.signOut();  

// ğŸ“– Ø§Ù„Ù€ partId Ø«Ø§Ø¨Øª Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø§Ø±Øª Ø§Ù„Ø­Ø§Ù„ÙŠ
const partId = "part-toxic-1"; 

// ğŸ’¬ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙÙ‚Ø±Ø§Øª Ù…Ø¹ Ø²Ø± Ø§Ù„ØªØ¹Ù„ÙŠÙ‚
function renderParagraphs(partId) {  
  const raw = document.getElementById("raw-content").innerText.trim();  
  const container = document.getElementById("rendered-content");  
  container.innerHTML = "";  
  
  const paragraphs = raw.split(/\n\s*\n/);  
  
  paragraphs.forEach((text, index) => {  
    const paraId = `${partId}-paragraph-${index + 1}`;  
  
    const wrapper = document.createElement("div");  
    wrapper.style.position = "relative";  
    wrapper.style.paddingRight = "40px";  
    wrapper.style.marginBottom = "28px";  
  
    const commentBtn = document.createElement("button");  
    commentBtn.textContent = "ğŸ’¬";  
    commentBtn.style.cssText = `  
      position: absolute;  
      right: 0;  
      top: 0;  
      background: none;  
      border: none;  
      font-size: 20px;  
      cursor: pointer;  
      color: #7dd3fc;  
    `;  
    commentBtn.onclick = () => openCommentBox(paraId);  
  
    const p = document.createElement("div");  
    p.id = paraId;  
    p.textContent = text.trim();  
    p.style.cssText = `  
      font-size: 1.05rem;  
      line-height: 1.9;  
      font-family: 'Amiri', serif;  
      color: #cfefff;  
      white-space: pre-line;  
    `;  
  
    wrapper.appendChild(commentBtn);  
    wrapper.appendChild(p);  
    container.appendChild(wrapper);  
  });  
}  
  
// ğŸ’¬ ÙØªØ­ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù…Ø¹ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª ÙˆØ§Ù„Ø±Ø¯ÙˆØ¯
function openCommentBox(paragraphId) {
  const overlay = document.createElement("div");
  overlay.className = "comment-box-overlay";
  overlay.innerHTML = `
    <button class="close-btn" onclick="this.parentElement.remove()">Ã—</button>
    <div class="comments" id="comments-${paragraphId}">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª...</div>
    <textarea placeholder="Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ Ù‡Ù†Ø§..." id="textarea-${paragraphId}"></textarea>
    <button class="send-comment" onclick="sendComment('${paragraphId}')">Ø¥Ø±Ø³Ø§Ù„</button>
  `;
  document.body.appendChild(overlay);

  const commentsContainer = overlay.querySelector(`#comments-${paragraphId}`);

  // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù…Ø¹ Ø§Ù„Ø±Ø¯ÙˆØ¯
  db.collection("comments")
    .where("paragraphId", "==", paragraphId)
    .orderBy("timestamp", "asc")
    .get()
    .then(snapshot => {
      if (snapshot.empty) {
        commentsContainer.innerHTML = "<div>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø¨Ø¹Ø¯.</div>";
      } else {
        commentsContainer.innerHTML = "";
        // Ø£ÙˆÙ„Ù‹Ø§ Ù†Ø¹Ø±Ø¶ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ø¨Ø¯ÙˆÙ† parentId)
        snapshot.forEach(doc => {
          const data = doc.data();
          if (!data.parentId) {
            const commentDiv = createCommentDiv(doc.id, data, paragraphId);
            commentsContainer.appendChild(commentDiv);
          }
        });
        // Ø¨Ø¹Ø¯ Ø¹Ø±Ø¶ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©ØŒ Ù†Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø¯ÙˆØ¯ ØªØ­Øª ÙƒÙ„ ØªØ¹Ù„ÙŠÙ‚
        snapshot.forEach(doc => {
          const data = doc.data();
          if (data.parentId) {
            const parentComment = document.getElementById(`comment-${data.parentId}`);
            if (parentComment) {
              const repliesContainer = parentComment.querySelector(".replies");
              const replyDiv = createReplyDiv(doc.id, data);
              if (repliesContainer) repliesContainer.appendChild(replyDiv);
            }
          }
        });
        // ØªÙØ¹ÙŠÙ„ Ø²Ø± "Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯" Ù„Ù„Ø±Ø¯ÙˆØ¯ Ø¥Ù† ÙˆØ¬Ø¯Øª
        setupReplyToggle();
      }
    });
}

// Ø¥Ù†Ø´Ø§Ø¡ div ØªØ¹Ù„ÙŠÙ‚ Ø±Ø¦ÙŠØ³ÙŠ Ù…Ø¹ Ø²Ø± Ø§Ù„Ø±Ø¯ ÙˆØ­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¯ÙˆØ¯
function createCommentDiv(id, data, paragraphId) {
  const div = document.createElement("div");
  div.className = "comment-box";
  div.id = `comment-${id}`;
  div.style.marginBottom = "16px";
  div.innerHTML = `
    <b>${data.user || "Ù…Ø¬Ù‡ÙˆÙ„"}:</b> ${data.text}<br>
    <button class="reply-btn" onclick="toggleReplyForm('${id}')">Ø±Ø¯</button>
    <div class="reply-form-container" id="reply-form-${id}" style="display:none; margin-top: 8px;">
      <textarea id="reply-text-${id}" placeholder="Ø§ÙƒØªØ¨ Ø±Ø¯Ùƒ Ù‡Ù†Ø§..." style="width: 100%; border-radius: 8px; border: 1px solid #38bdf8; background: #020611; color: #cfefff; padding: 6px;"></textarea>
      <button class="send-comment" style="margin-top:4px;" onclick="sendReply('${paragraphId}', '${id}')">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯</button>
    </div>
    <div class="replies" style="margin-left: 20px; margin-top: 8px; max-height: 280px; overflow-y: auto; border-left: 2px solid #38bdf8; padding-left: 8px; position: relative;">
      <div class="show-more-container" style="text-align: center; margin-top: 6px; display:none;">
        <button class="show-more-btn" onclick="showMoreReplies(this)">Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯</button>
      </div>
    </div>
  `;
  return div;
}

// Ø¥Ù†Ø´Ø§Ø¡ div Ø±Ø¯
function createReplyDiv(id, data) {
  const div = document.createElement("div");
  div.className = "comment-box reply";
  div.id = `comment-${id}`;
  div.style.marginBottom = "12px";
  div.style.fontSize = "0.9rem";
  div.style.color = "#a0cfff";
  div.style.border = "1px solid #38bdf8aa";
  div.style.borderRadius = "10px";
  div.style.padding = "6px 10px";
  div.style.background = "rgba(15, 23, 42, 0.9)";
  div.textContent = `${data.user || "Ù…Ø¬Ù‡ÙˆÙ„"}: ${data.text}`;
  return div;
}

// Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø±Ø¯
function toggleReplyForm(commentId) {
  const form = document.getElementById(`reply-form-${commentId}`);
  if (!form) return;
  form.style.display = (form.style.display === "none") ? "block" : "none";
}

// Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø¯ Ø¥Ù„Ù‰ Firebase
function sendReply(paragraphId, parentId) {
  const textarea = document.getElementById(`reply-text-${parentId}`);
  if (!textarea) return;
  const text = textarea.value.trim();
  if (!text) return;
  if (!currentUser) {
    alert("Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„ØªØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„Ø±Ø¯");
    return;
  }

  db.collection("comments").add({
    paragraphId,
    parentId,
    text,
    user: currentUser.displayName || currentUser.email || "Ù‚Ø§Ø±Ø¦",
    timestamp: firebase.firestore.FieldValue.serverTimestamp()
  }).then(() => {
    textarea.value = "";
    toggleReplyForm(parentId);
    document.querySelector(".comment-box-overlay").remove();
    openCommentBox(paragraphId);
    updateCommentCount();
  }).catch(console.error);
}

// Ø¥Ø¸Ù‡Ø§Ø± Ø£Ùˆ Ø¥Ø®ÙØ§Ø¡ Ø²Ø± "Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯" Ø¥Ø°Ø§ Ø¹Ø¯Ø¯ Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø£ÙƒØ¨Ø± Ù…Ù† 4
function setupReplyToggle() {
  document.querySelectorAll(".replies").forEach(container => {
    const replies = container.querySelectorAll(".comment-box.reply");
    const showMoreContainer = container.querySelector(".show-more-container");

    replies.forEach((reply, index) => {  
      if (index >= 4) reply.style.display = "none";  
      else reply.style.display = "block";
    });  

    if (replies.length > 4) {  
      showMoreContainer.style.display = "block";  
    } else {  
      showMoreContainer.style.display = "none";  
    }
  });
}

// Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯"
function showMoreReplies(button) {
  const container = button.closest(".replies");
  if (!container) return;
  const hiddenReplies = Array.from(container.querySelectorAll(".comment-box.reply")).filter(c => c.style.display === "none");
  if (hiddenReplies.length > 0) {
    hiddenReplies.forEach(reply => reply.style.display = "block");
    button.textContent = "Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ø¯ÙˆØ¯";
  } else {
    container.querySelectorAll(".comment-box.reply").forEach((reply, index) => {
      reply.style.display = (index >= 4) ? "none" : "block";
    });
    button.textContent = "Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯";
  }
}

// ğŸ“ Ø¥Ø±Ø³Ø§Ù„ ØªØ¹Ù„ÙŠÙ‚
function sendComment(paragraphId) {
  const textarea = document.getElementById(`textarea-${paragraphId}`);
  if (!textarea) return;
  const text = textarea.value.trim();
  if (!text) return;
  if (!currentUser) {
    alert("Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„ØªØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„ØªØ¹Ù„ÙŠÙ‚");
    return;
  }

  db.collection("comments").add({
    paragraphId,
    partId,
    text,
    user: currentUser.displayName || currentUser.email || "Ù‚Ø§Ø±Ø¦",
    timestamp: firebase.firestore.FieldValue.serverTimestamp()
  }).then(() => {
    textarea.value = "";
    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯ÙŠØ¯
    document.querySelector(".comment-box-overlay").remove();
    openCommentBox(paragraphId);
    updateCommentCount();
  }).catch(console.error);
}

// â¤ï¸ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµÙˆÙŠØª ÙˆØ§Ù„Ù‚Ø±Ø§Ø¡Ø©
const voteBtn = document.getElementById('voteBtn');
const voteCount = document.getElementById('voteCount');
const readCount = document.getElementById('readCount');
const commentCount = document.getElementById('commentCount');
const heartExplosion = document.getElementById('heartExplosion');

const voteRef = db.collection("votes").doc(partId);
const readsRef = db.collection("reads");
const commentsRef = db.collection("comments");

function updateVoteCount() {
  voteRef.get().then(doc => {
    voteCount.textContent = `${doc.exists ? doc.data().count || 0 : 0} ØªØµÙˆÙŠØª`;
  });
}

function updateReadCount() {
  readsRef.where("partId", "==", partId).get().then(snapshot => {
    readCount.textContent = `${snapshot.size} Ù‚Ø±Ø§Ø¡Ø©`;
  });
}

function updateCommentCount() {
  commentsRef.where("partId", "==", partId).get().then(snapshot => {
    commentCount.textContent = `${snapshot.size} ØªØ¹Ù„ÙŠÙ‚`;
  });
}

// ğŸ’– ØªØ£Ø«ÙŠØ± Ø§Ù„Ù‚Ù„ÙˆØ¨
function triggerHearts() {
  for (let i = 0; i < 25; i++) {
    const heart = document.createElement('div');
    heart.textContent = 'ğŸ’–';
    heart.style.cssText = `
      position: absolute;
      top: ${Math.random() * 100}%;
      left: ${Math.random() * 100}%;
      font-size: ${12 + Math.random() * 20}px;
      opacity: 1;
      animation: floatUp 1.8s ease-out forwards;
      pointer-events: none;
      user-select: none;
    `;
    heartExplosion.appendChild(heart);
    setTimeout(() => heart.remove(), 2000);
  }
}

// ğŸ’« Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ù„Ø­Ø±ÙƒØ©
const style = document.createElement('style');
style.textContent = `
  @keyframes floatUp {
    0% { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(-120px); opacity: 0; }
  }
`;
document.head.appendChild(style);

// ğŸš€ ØªÙ†ÙÙŠØ° Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
document.addEventListener("DOMContentLoaded", () => {
  renderParagraphs(partId);

  // ØªØ³Ø¬ÙŠÙ„ Ù‚Ø±Ø§Ø¡Ø© (ÙŠÙ…ÙƒÙ† Ø£Ù† ØªØ²ÙŠØ¯ Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©)
  readsRef.add({
    partId,
    timestamp: firebase.firestore.FieldValue.serverTimestamp()
  }).catch(console.error);

  updateVoteCount();
  updateReadCount();
  updateCommentCount();

  if (voteBtn) {
    voteBtn.onclick = () => {
      if (!currentUser) return alert("Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„ØªØµÙˆÙ‘Øª ğŸŒ¹");

      voteRef.update({ count: firebase.firestore.FieldValue.increment(1) })  
        .then(() => {  
          updateVoteCount();  
          triggerHearts();  
        }).catch(() => {  
          voteRef.set({ count: 1 });  
          updateVoteCount();  
          triggerHearts();  
        });
    };
  }
});
</script>
  </body>
</html>
